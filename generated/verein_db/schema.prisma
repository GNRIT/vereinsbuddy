generator client {
  provider = "prisma-client-js"
  output   = "../generated/verein_db"
}

datasource vereindb {
  provider = "mysql"
  url      = env("DATABASE_URL_VEREINDB")
}

model allergie {
  ID             Int         @id @default(autoincrement())
  JF_Mitglied_ID Int
  FF_Mitglied_ID Int
  Allergie       String      @vereindb.VarChar(255)
  Beschreibung   String?     @vereindb.Text
  Erstellt_am    DateTime?   @map("Erstellt am") @vereindb.Date
  Geaendert_am   DateTime?   @map("Geaendert am") @vereindb.Date
  ff_mitglied    ff_mitglied @relation(fields: [FF_Mitglied_ID], references: [ID], onUpdate: Restrict, map: "allergie_ibfk_1")
  jf_mitglied    jf_mitglied @relation(fields: [JF_Mitglied_ID], references: [ID], onUpdate: Restrict, map: "allergie_ibfk_2")

  @@index([FF_Mitglied_ID], map: "FF_Mitglied_ID")
  @@index([JF_Mitglied_ID], map: "JF_Mitglied_ID")
}

model dienstgrad {
  ID                     Int       @id @default(autoincrement())
  Abkuerzung_maennlich   String?   @map("Abkuerzung maennlich") @vereindb.VarChar(100)
  Beschreibung_maennlich String?   @map("Beschreibung maennlich") @vereindb.Text
  Abkuerzung_weiblich    String?   @map("Abkuerzung weiblich") @vereindb.VarChar(100)
  Beschreibung_weiblich  String?   @map("Beschreibung weiblich") @vereindb.Text
  Erstellt_am            DateTime? @map("Erstellt am") @vereindb.Date
  Geaendert_am           DateTime? @map("Geaendert am") @vereindb.Date
}

model dientsabend {
  ID           Int          @id @default(autoincrement())
  Datum        DateTime     @vereindb.DateTime(0)
  Thema        String?      @vereindb.VarChar(255)
  Erstellt_am  DateTime     @map("Erstellt am") @vereindb.Date
  Geaendert_am DateTime?    @map("Geaendert am") @vereindb.Date
  einteilung   einteilung[]
}

model einheit {
  ID           Int          @id @default(autoincrement())
  Abkuerzung   String?      @vereindb.VarChar(255)
  Beschreibung String?      @vereindb.Text
  Erstellt_am  DateTime?    @map("Erstellt am") @vereindb.Date
  Geaendert_am DateTime?    @map("Geaendert am") @vereindb.Date
  einteilung   einteilung[]
}

model einsatz {
  ID             Int          @id @default(autoincrement())
  Einsatznummer  Int
  Datum_Anfang   DateTime     @map("Datum Anfang") @vereindb.DateTime(0)
  Uhrzeit_Anfang DateTime     @map("Uhrzeit Anfang") @vereindb.Time(0)
  Datum_Ende     DateTime?    @map("Datum Ende") @vereindb.Date
  Uhrzeit_Ende   DateTime?    @map("Uhrzeit Ende") @vereindb.Time(0)
  Beschreibung   String?      @vereindb.Text
  Strasse        String?      @vereindb.VarChar(255)
  Hausnummer     String?      @vereindb.VarChar(32)
  Postleitzahl   String?      @vereindb.VarChar(32)
  Ort            String?      @vereindb.VarChar(255)
  Art            einsatz_Art
  Erstellt_am    DateTime?    @map("Erstellt am") @vereindb.Date
  Geaendert_am   DateTime?    @map("Geaendert am") @vereindb.Date
  einteilung     einteilung[]
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
model einteilung {
  ID             Int         @id @default(autoincrement())
  Einsatz_ID     Int
  Dienstabend_ID Int
  Fahrzeug_ID    Int
  FF_Mitglied_ID Int
  Einheit_ID     Int
  dientsabend    dientsabend @relation(fields: [Dienstabend_ID], references: [ID], onDelete: Cascade, map: "einteilung_ibfk_1")
  einheit        einheit     @relation(fields: [Einheit_ID], references: [ID], onDelete: Cascade, map: "einteilung_ibfk_2")
  einsatz        einsatz     @relation(fields: [Einsatz_ID], references: [ID], onDelete: Cascade, map: "einteilung_ibfk_3")
  fahrzeug       fahrzeug    @relation(fields: [Fahrzeug_ID], references: [ID], onDelete: Cascade, map: "einteilung_ibfk_4")
  ff_mitglied    ff_mitglied @relation(fields: [FF_Mitglied_ID], references: [ID], onDelete: Cascade, map: "einteilung_ibfk_5")

  @@index([Dienstabend_ID], map: "Dienstabend_ID")
  @@index([Einheit_ID], map: "Einheit_ID")
  @@index([Einsatz_ID], map: "Einsatz_ID")
  @@index([FF_Mitglied_ID], map: "FF_Mitglied_ID")
  @@index([Fahrzeug_ID], map: "Fahrzeug_ID")
}

model fahrzeug {
  ID                Int             @id @default(autoincrement())
  Kennzeichen       String?         @vereindb.VarChar(100)
  Fahrzeugtyp       String?         @vereindb.VarChar(100)
  Besatzungsstaerke String?         @vereindb.VarChar(100)
  Status            fahrzeug_Status @default(verfuegbar)
  Erstellt_am       DateTime?       @map("Erstellt am") @vereindb.Date
  Geaendert_am      DateTime?       @map("Geaendert am") @vereindb.Date
  einteilung        einteilung[]
}

model ff_mitglied {
  ID                   Int                    @id @default(autoincrement())
  Person_ID            Int
  Eintrittsdatum       DateTime               @vereindb.Date
  Austrittsdatum       DateTime?              @vereindb.Date
  Aufnahmedatum        DateTime?              @vereindb.Date
  Status               ff_mitglied_Status     @default(aktiv)
  Erstellt_am          DateTime               @map("Erstellt am") @vereindb.Date
  Geaendert_am         DateTime?              @map("Geaendert am") @vereindb.Date
  allergie             allergie[]
  einteilung           einteilung[]
  ff_mitglied_lehrgang ff_mitglied_lehrgang[]
  mitglied_funktionen  mitglied_funktionen[]

  @@index([Person_ID], map: "ff_mitglied_ibfk_1")
}

model ff_mitglied_lehrgang {
  ID              Int         @id @default(autoincrement())
  FF_Mitglied_ID  Int
  Lehrgang_ID     Int
  Datum_bestanden DateTime?   @map("Datum bestanden") @vereindb.Date
  Erstellt_am     DateTime?   @map("Erstellt am") @vereindb.Date
  Geaendert_am    DateTime?   @map("Geaendert am") @vereindb.Date
  ff_mitglied     ff_mitglied @relation(fields: [FF_Mitglied_ID], references: [ID], onUpdate: Restrict, map: "ff_mitglied_lehrgang_ibfk_1")
  lehrgang        lehrgang    @relation(fields: [Lehrgang_ID], references: [ID], onUpdate: Restrict, map: "ff_mitglied_lehrgang_ibfk_2")

  @@index([FF_Mitglied_ID], map: "FF_Mitglied_ID")
  @@index([Lehrgang_ID], map: "Lehrgang_ID")
}

model funktion_ff {
  ID                  Int                   @id @default(autoincrement())
  Name                String                @vereindb.VarChar(100)
  Ist_Admin           Boolean               @default(false)
  Erstellt_am         DateTime?             @map("Erstellt am") @vereindb.Date
  Geaendert_am        DateTime?             @map("Geaendert am") @vereindb.Date
  mitglied_funktionen mitglied_funktionen[]
}

model funktion_jf {
  ID           Int       @id @default(autoincrement())
  Name         String    @vereindb.VarChar(100)
  Ist_admin    Boolean   @default(false)
  Erstellt_am  DateTime  @map("Erstellt am") @vereindb.Date
  Geaendert_am DateTime? @map("Geaendert am") @vereindb.Date
}

model jf_erziehungsberechtigter {
  ID             Int         @id @default(autoincrement())
  JF_Mitglied_ID Int
  Person_ID      Int
  Erstellt_am    DateTime?   @map("Erstellt am") @vereindb.Date
  Geaendert_am   DateTime?   @map("Geaendert am") @vereindb.Date
  jf_mitglied    jf_mitglied @relation(fields: [JF_Mitglied_ID], references: [ID], onUpdate: Restrict, map: "jf_erziehungsberechtigter_ibfk_1")

  @@index([JF_Mitglied_ID], map: "jf_erziehungsberechtigter_ibfk_1")
  @@index([Person_ID], map: "jf_erziehungsberechtigter_ibfk_2")
}

model jf_mitglied {
  ID                        Int                         @id @default(autoincrement())
  Person_ID                 Int
  Eintrittsdatum            DateTime                    @vereindb.Date
  Austrittsdatum            DateTime?                   @vereindb.Date
  Aufnahmedatum             DateTime?                   @vereindb.Date
  Status                    jf_mitglied_Status          @default(aktiv)
  Erstellt_am               DateTime?                   @map("Erstellt am") @vereindb.Date
  Geaendert_am              DateTime?                   @map("Geaendert am") @vereindb.Date
  allergie                  allergie[]
  jf_erziehungsberechtigter jf_erziehungsberechtigter[]

  @@index([Person_ID], map: "jf_mitglied_ibfk_1")
}

model lehrgang {
  ID                   Int                    @id @default(autoincrement())
  Abk_rzung            String?                @map("Abk√ºrzung") @vereindb.VarChar(255)
  Beschreibung         String?                @vereindb.Text
  Reihenfolge          Int?
  Erstellt_am          DateTime?              @map("Erstellt am") @vereindb.Date
  Geaendert_am         DateTime?              @map("Geaendert am") @vereindb.Date
  ff_mitglied_lehrgang ff_mitglied_lehrgang[]
}

model mitglied_funktionen {
  ID           Int                     @id @default(autoincrement())
  Mitglied_ID  Int
  Funktion_ID  Int
  Typ          mitglied_funktionen_Typ
  Erstellt_am  DateTime?               @map("Erstellt am") @vereindb.Date
  Geaendert_am DateTime?               @map("Geaendert am") @vereindb.Date
  ff_mitglied  ff_mitglied             @relation(fields: [Mitglied_ID], references: [ID], onDelete: Cascade, map: "mitglied_funktionen_ibfk_1")
  funktion_ff  funktion_ff             @relation(fields: [Funktion_ID], references: [ID], onDelete: Cascade, map: "mitglied_funktionen_ibfk_2")

  @@index([Mitglied_ID], map: "mitglied_funktionen_ibfk_1")
  @@index([Funktion_ID], map: "mitglied_funktionen_ibfk_2")
}

model mitglied_login {
  ID           Int                @id @default(autoincrement())
  Benutzer_ID  Int
  Mitglied_ID  Int
  Typ          mitglied_login_Typ
  Erstellt_am  DateTime           @map("Erstellt am") @vereindb.Date
  Geaendert_am DateTime?          @map("Geaendert am") @vereindb.Date

  @@index([Benutzer_ID], map: "mitglied_login_ibfk_1")
  @@index([Mitglied_ID], map: "mitglied_login_ibfk_2")
}

model teilnahme {
  ID               Int           @id @default(autoincrement())
  Mitglied_ID      Int
  Veranstaltung_ID Int
  Typ              teilnahme_Typ
  Erstellt_am      DateTime      @map("Erstellt am") @vereindb.Date
  Geaendert_am     DateTime?     @map("Geaendert am") @vereindb.Date

  @@index([Veranstaltung_ID], map: "teilnahme_ibfk_4")
  @@index([Mitglied_ID], map: "Mitglied_ID")
}

enum mitglied_funktionen_Typ {
  ff
  jf
}

enum mitglied_login_Typ {
  ff
  jf
}

enum teilnahme_Typ {
  einsatz
  dienstabend
}

enum ff_mitglied_Status {
  aktiv
  anwaerter
  ausgetreten
}

enum jf_mitglied_Status {
  aktiv
  anwaerter
  ausgetreten
}

enum einsatz_Art {
  brand
  hilfeleistung
  sonstiges
}

enum fahrzeug_Status {
  verfuegbar
  im_einsatz    @map("im einsatz")
  in_wartung    @map("in wartung")
  ausser_dienst @map("ausser dienst")
}
